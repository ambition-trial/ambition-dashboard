{% extends edc_listboard_template %}

{% load edc_dashboard_extras %}
{% load tz %}
{% load static %}


{% block listboard_table_header %}

    <!-- begin results header -->
    <th>#</th>
    <th></th>
    <th>Subject</th>
    <th>AE</th>
    <th>Parent</th>
    <th>Follow-ups</th>
    <th>Created</th>
    <th>Modified</th>
    <!-- end results header -->

{% endblock listboard_table_header %}

{% block listboard_table_button_column %}{% endblock %}

{% block listboard_table_columns %}

    <td>
        <div class="btn-group">
           <a title="Print AE Initial" role="button" href="?pdf={{result.action_identifier}}" class="btn btn-default btn-sm"><i class="fas fa-file-pdf"></i></a>
        </div>&nbsp;
    </td>
    <td>{{ result.subject_identifier }}
        <br>{{ result.parent_reference_obj.site.name|title }}
        {% if result.death_report_obj %}
            <BR><span class="label label-info">Deceased</span>
        {% endif %}
    </td>

    <td>{{ result.reference_model_name }}
        <br><span class="text text-muted small">{{ utc_date|timeuntil:result.report_datetime.date }} ago</span>
    </td>

    <td>{{ result.parent_reference_model_name|default:"" }}</td>

    <td>{% for obj in result.reference_obj.ae_follow_ups %}<p>AE Followup {{ obj }}</p>{% endfor %}</td>

    <td>{{ result.reference_obj.user_created|default:"---" }}<BR>{{ result.reference_obj.created|date:"SHORT_DATETIME_FORMAT"|default:"---" }}</td>

    <td>{{ result.reference_obj.user_modified|default:"---" }}<BR>{{ result.reference_obj.modified|date:"SHORT_DATETIME_FORMAT"|default:"---" }}</td>

{% endblock listboard_table_columns %}
